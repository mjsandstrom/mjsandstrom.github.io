
<!DOCTYPE html>
<html>
    <head>
        <title>Dancing Goat Microsite</title>
        
        <script type="text/javascript">
            (function (w, d, s, e, n) {
                w.XperienceTrackerName = n;
                w[n] = w[n] || function () {
                    (w[n].q = w[n].q || []).push(arguments);
                };
                var scriptElement = d.createElement(s);
                var scriptSection = d.getElementsByTagName(s)[0];
                scriptElement.async = 1;
                scriptElement.src = e.replace(/\/+$/, '') + '/Kentico.Resource/CrossSiteTracking/Logger.js';
                scriptSection.parentNode.insertBefore(scriptElement, scriptSection);
                w[n]('init', { mainSiteUrl: e, document: d, window: w });
            })(window, document, 'script', 'https://trainingguidesweb20231129161152.azurewebsites.net', 'kxt');
            
            var consentName = 'marketing.cookies.consent';

            // Disables all tracking by default
            kxt('consentdefault', {
                allow_tracking: false,
                allow_datainput: false
            });

            // Retrieves and displays the consent text
            kxt('consentdata', {
                codeName: consentName,
                languageName: 'en',
                callback: consentData => {
                    document.getElementById('lblConsentText').innerHTML = consentData.shortText;
                    console.log('consent text updated with callback');
                },
                onerror: t => console.log(t)
            });

            // Enables tracking if the current contact has agreed with the consent
            kxt('consentcontactstatus', {
                codeName: consentName,
                callback: consentStatus => {
                    if (consentStatus.isAgreed) {
                        kxt('updateconsent', {
                            allow_tracking: true,
                            allow_datainput: true
                        });
                    }
                    console.log('consent status callback fired, '+ consentStatus);
                },
                onerror: t => console.log(t)
            });

            // Logs a page visit activity (if tracking is enabled for the current contact)
            kxt('pagevisit');

            // Click handler that creates a consent agreement for the current contact
            var trackingConsentAgree = function trackingConsentAgree() {
                kxt('consentagree', {
                    codeName: consentName,
                    callback: () => {
                        // Enables tracking for any subsequent logging scripts
                        kxt('updateconsent', {
                            allow_tracking: true,
                            allow_datainput: true
                        });
                        console.log('consent agree callback hit');
                    },
                    onerror: t => console.log(t)
                });
            }

            // Click handler that revokes the tracking consent agreement for the current contact
            var trackingConsentRevoke = function trackingConsentRevoke() {
                kxt('consentrevoke', {
                    codeName: consentName,
                    callback: () => {
                        // Disables tracking for any subsequent logging scripts
                        kxt('updateconsent', {
                            allow_tracking: false,
                            allow_datainput: false
                        });
                        console.log('consent revoke callback hit');
                    },
                    onerror: t => console.log(t)
                });
            }

            function logLinkClick(labelText) {
                kxt('click', {
                    label: labelText,
                    onerror: t => console.log(t)
                });
                console.log('logged standard click');
            }
        </script>
        

    </head>
    <body>
        <h2>Welcome to the Microsite</h2>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in tempus est. Maecenas eu urna id quam lacinia porta. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi quis massa efficitur, cursus nisi dictum, ullamcorper libero. Pellentesque a sodales tortor. Ut quis rhoncus justo, vel molestie quam. Fusce quis pretium mi. Suspendisse pretium ante quis massa ornare condimentum. In at tortor eros. Fusce vitae sem venenatis, mollis augue a, imperdiet sapien. Nullam at ultricies est. Sed elit lorem, blandit sed pharetra ullamcorper, elementum vitae elit. Etiam convallis risus non massa pharetra ultricies nec ac nibh. Ut elit felis, viverra sed nisi eu, interdum imperdiet risus.</p>
        <p>Nullam rhoncus facilisis urna id ultrices. In ut arcu ac nunc sodales luctus. Donec ut fermentum lacus. Integer vel tellus risus. Mauris sed porttitor dui. Nullam vitae ultricies nunc. Vestibulum eleifend ligula ac mi pretium luctus. Vestibulum quis ornare nisl.</p>
        <p>Sed eget ultricies lacus. In ac maximus neque, maximus scelerisque leo. Fusce vehicula tellus quis lacus luctus, in rutrum nulla dictum. In at suscipit nunc. Nunc id aliquam turpis, in efficitur lacus. Pellentesque sed erat non magna facilisis ultricies. Ut viverra id odio vel hendrerit. Praesent arcu urna, lacinia iaculis tellus non, sagittis pellentesque augue. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce hendrerit nisl sit amet nibh luctus, quis finibus massa placerat. Nulla pulvinar magna vitae commodo euismod. Cras interdum nisl at risus auctor faucibus. Praesent in libero volutpat, posuere nibh nec, viverra leo. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>

        <label id="lblConsentText"></label>
        <button id="btnConsentAgree" onclick="trackingConsentAgree();">Agree to be tracked</button>
        <button id="btnConsentRevoke" onclick="trackingConsentRevoke();">Revoke tracking consent</button>
    </body>
</html>